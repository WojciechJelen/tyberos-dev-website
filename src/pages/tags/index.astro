---
import BaseLayout from '@layouts/BaseLayout.astro'
import { getCollection } from 'astro:content'

const allPosts = await getCollection('posts')
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())]
const pageTitle = 'Tag index'
---

<BaseLayout {pageTitle}>
  <div class="flex flex-wrap gap-2">
    {
      tags.map((tag) => (
        <div class="min-w-[100px] rounded-md border-dotted bg-red-400 p-2 text-center">
          <a href={`/tags/${tag}`} class="no-underline">
            {tag}
          </a>
        </div>
      ))
    }
  </div>
</BaseLayout>
